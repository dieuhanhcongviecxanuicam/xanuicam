<!DOCTYPE html><html lang="vi"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>UBND xã Núi Cấm - Mock Login</title>
  <style>body{font-family:Arial,Helvetica,sans-serif;padding:40px} .box{max-width:420px;margin:0 auto} label{display:block;margin-top:8px}</style>
</head>
<body>
  <div class="box">
    <h1>Mock Login</h1>
    <form id="loginForm">
      <label for="identifier">Identifier</label>
      <input id="identifier" name="identifier" type="text">
      <label for="password">Password</label>
      <input id="password" name="password" type="password">
      <div style="margin-top:12px">
        <button type="submit">Đăng nhập</button>
      </div>
    </form>
    <p id="status" style="color:green">Thông tin đăng nhập không chính xác.</p>
  </div>
  <script>
    document.getElementById('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const id = document.getElementById('identifier').value;
      const pw = document.getElementById('password').value;
      try{
        const resp = await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({identifier:id,password:pw})});
        if(resp.ok){ const j=await resp.json(); localStorage.setItem('token', j.token); document.getElementById('status').innerText='Logged in'; }
        else { const t=await resp.json(); document.getElementById('status').innerText = t.message || 'Login failed'; }
      }catch(err){ document.getElementById('status').innerText='Network error'; }
    });
  </script>

</body></html>